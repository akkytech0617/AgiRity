# AgiRity 要件定義書

## プロジェクト概要

| 項目 | 内容 |
|------|------|
| **プロジェクト名** | AgiRity |
| **コンセプト** | 仕事開始時の"儀式"を自動化、複数アプリを一括起動するワークスペース管理ツール |
| **キャッチコピー** | Start working in 3 seconds, not 3 minutes |
| **ターゲットユーザー** | 開発者・エンジニア (Phase 1) |
| **開発方針** | オープンソース、ユーザー数優先 |
| **ライセンス** | MIT (予定) |
| **ドメイン** | agirity.com (Cloudflare) |
| **初期バージョン** | v0.1.0 |

---

## ターゲットユーザーのペインポイント

### 解決したい課題

1. **毎朝の反復作業**
   - 同じアプリを毎朝手動で起動している
   - 平均3分の無駄な時間

2. **プロジェクトごとの切り替え**
   - クライアントワークごとに必要なツールセットが違う
   - 何を開くか覚えておく必要がある

3. **起動順序の管理**
   - Rancher Desktop → VS Code など依存関係がある
   - 手動で順番を守る必要がある

4. **ツールの多さ**
   - 日常的に10個以上のツールを使い分ける
   - 開くのを忘れることがある

5. **設定の分散**
   - MCPやAIツールの設定が各所にバラバラ
   - プロジェクトごとに設定を変える必要がある

6. **急な割り込み**
   - 別プロジェクトから連絡が来て即座に切り替えが必要
   - 環境構築に時間がかかる

---

## コア機能

### ツールの種類と挙動

| ツールタイプ | 例 | 挙動 | 理由 |
|-------------|-----|------|------|
| **シングルトン** | Teams, Slack, Outlook | 既に起動中ならスキップ | 1つしか起動できない/すべきでない |
| **マルチインスタンス** | VS Code, Terminal, Figma | 常に新しいウィンドウを開く | プロジェクトごとに別ウィンドウ |
| **ブラウザ** | Chrome, Edge | 新しいタブを追加 | URLごとに別タブ |

### ワークスペースの構成要素

| 要素 | 説明 | 例 |
|------|------|-----|
| **名前** | ワークスペースの識別名 | 「クライアントA - 開発」 |
| **ツールリスト** | 起動するアプリケーション群 | VS Code, Chrome, Rancher |
| **起動順序** | ツールを起動する順番 | 1→2→3 |
| **遅延・待機** | 前のツールが起動してから待つ時間 | Rancher起動後30秒待機 |
| **フォルダ/ファイル** | 開くパス | ~/projects/client-a |
| **URL群** | ブラウザで開くURL | GitHub, Azure, localhost |
| **プリセット** | アイテムのグループ化設定 | 「開発のみ」「レビューモード」 |
| **環境変数** | (Phase 2) プロジェクト固有の変数 | NODE_ENV, DB_URL |

### 起動プリセット (Launch Presets)

ワークスペース内のアイテムをグループ化し、用途別に部分起動できる機能。

| プリセット例 | 含むアイテム | ユースケース |
|-------------|-------------|-------------|
| **Full Development** | 全アイテム | フルセットで開発開始 |
| **Code Only** | VS Code, Terminal | コーディングのみ |
| **Review Mode** | GitHub, Linear | PRレビュー時 |
| **Quick Check** | ブラウザURLのみ | 状況確認のみ |

**メリット**:
- 毎回全てを起動する必要がない
- シナリオ別の効率的な起動
- リソース節約（不要なアプリを起動しない）

---

## MVP (Phase 1) 定義

### 必須機能 (超シンプル版)

#### 1. アプリ起動
- クリックしたらアプリが立ち上がる
- ブラウザ + URLが開く

#### 2. 複数起動
- 1つずつでも、複数同時でもOK

#### 3. プロジェクト管理
- プロジェクト(ワークスペース)ごとにアプリをまとめる
- 作成・編集・削除

**これだけでコアバリュー「3秒で仕事開始」は実現できる!**

---

## 機能一覧とフェーズ分け

### 🔴 Phase 1: MVP (必須機能)

| No | カテゴリ | 機能 | 説明 | 優先度 |
|----|----------|------|------|--------|
| 1 | ワークスペース | 作成・編集・削除 | ワークスペースの基本管理 | 🔥 最高 |
| 2 | ワークスペース | 複数保存 | 複数のワークスペースを保存・管理 | 🔥 最高 |
| 3 | ワークスペース | 一覧表示 | すべてのワークスペースをリスト表示 | 🔥 最高 |
| 4 | ワークスペース | 実行(起動) | ワークスペースをワンクリックで実行 | 🔥 最高 |
| 4a | ワークスペース | プリセット起動 | プリセットで部分起動 | 🔥 最高 |
| 5 | アプリ起動 | デスクトップアプリ起動 | インストール済みアプリを起動 | 🔥 最高 |
| 6 | アプリ起動 | 起動順序指定 | ツールを指定した順番で起動 | 🔥 最高 |
| 7 | アプリ起動 | 遅延起動 | 「○秒待つ」機能 | 🔥 最高 |
| 8 | アプリ起動 | シングルトン判定 | 既に起動中ならスキップ (自動判定) | ⚡ 高 |
| 9 | アプリ起動 | マルチインスタンス対応 | 新しいウィンドウを開く (自動判定) | ⚡ 高 |
| 10 | ブラウザ | 複数URL起動 | ブラウザで複数タブを開く | 🔥 最高 |
| 11 | ブラウザ | デフォルトブラウザ対応 | ユーザーのデフォルトブラウザを使用 | ⚡ 高 |
| 12 | ファイル | フォルダを開く | VS Codeで特定フォルダを開く | 🔥 最高 |
| 13 | データ | ローカル保存 | YAML/JSON形式で設定を保存 | 🔥 最高 |
| 14 | UI | メイン画面 (Quick Launch) | ワークスペースカード一覧とクイック起動 | 🔥 最高 |
| 15 | UI | ワークスペース詳細画面 | プリセット表示とアイテム一覧 | 🔥 最高 |
| 16 | UI | ワークスペース編集画面 | GUIでワークスペースを編集 | 🔥 最高 |
| 17 | UI | ツール追加UI | アプリを選択して追加 | 🔥 最高 |
| 18 | UI | サイドバーナビゲーション | ワークスペース検索・フィルタ | 🔥 最高 |

**Phase 1のゴール**: 基本的なワークスペース管理とアプリ一括起動が動く

---

### 🟡 Phase 2: エンハンスメント

| No | カテゴリ | 機能 | 説明 | 優先度 |
|----|----------|------|------|--------|
| 17 | レジストリ | ツール登録 | 日常使うツールを一元管理 | ⚡ 高 |
| 18 | レジストリ | 自動検出 | インストール済みアプリを自動検出 | ⚡ 高 |
| 19 | レジストリ | カテゴリ分け | ツールを「開発」「デザイン」等に分類 | 💚 中 |
| 20 | レジストリ | タグ付け | ツールに自由にタグを付与 | 💚 中 |
| 21 | レジストリ | 検索・フィルタ | ツールを検索・絞り込み | 💚 中 |
| 22 | レジストリ | 使用統計 | どのツールをよく使うか表示 | 💙 低 |
| 23 | IaC | エクスポート (GUI) | ワークスペースをYAML/JSON出力 | ⚡ 高 |
| 24 | IaC | インポート (GUI) | YAML/JSONから設定を読み込み | ⚡ 高 |
| 25 | IaC | バリデーション | 設定ファイルの妥当性チェック | 💚 中 |
| 26 | IaC | 環境変数サポート | `${VAR}`形式の変数展開 | 💚 中 |
| 27 | 起動制御 | 起動完了検知 | アプリの起動完了を待つ (高度) | 💚 中 |
| 28 | 起動制御 | 依存関係管理 | 「AはBに依存」を明示的に定義 | 💚 中 |
| 29 | ワークスペース | 追加起動モード | 既存を残したまま追加でツールを起動 | 💚 中 |
| 30 | ワークスペース | タグ・カテゴリ | ワークスペースにタグ付け | 💙 低 |
| 32 | ブラウザ | プロファイル指定 | Chrome Profileを指定 | 💚 中 |
| 33 | ブラウザ | 新しいウィンドウ | 別ウィンドウでURLを開く | 💙 低 |
| 34 | ファイル | ファイルを開く | 特定のファイルを開く | 💚 中 |
| 35 | UI | ショートカットキー | グローバルホットキーで起動 | 💚 中 |
| 36 | UI | 起動時自動実行 | OS起動時に自動起動 | 💚 中 |

**Phase 2のゴール**: 開発者が実務で使いやすい機能が揃う、設定の共有ができる

---

### 🟢 Phase 3: 高度な機能

| No | カテゴリ | 機能 | 説明 | 優先度 |
|----|----------|------|------|--------|
| 37 | CLI | コマンドラインIF | `agirity launch workspace` | 💚 中 |
| 38 | CLI | エクスポート/インポート | CLI経由での設定管理 | 💚 中 |
| 39 | CLI | バリデーション | `agirity validate config.yaml` | 💙 低 |
| 40 | IaC | テンプレート | 公式・コミュニティテンプレート | 💙 低 |
| 41 | IaC | ドキュメント生成 | 設定からMarkdown生成 | 💙 低 |
| 42 | MCP | Proxy機能 | AgiRity経由でMCPサーバーを管理 | 💙 低 |
| 43 | 設定管理 | プロファイル切り替え | Claude/Cursor等の設定切り替え | 💙 低 |
| 44 | 起動制御 | コマンド実行 | ターミナルでコマンド自動実行 | 💚 中 |
| 45 | 起動制御 | ウィンドウ配置 | アプリのウィンドウ位置・サイズ指定 | 💙 低 |
| 46 | 起動制御 | VPN統合 | VPNに自動接続 | 💙 低 |
| 47 | 起動制御 | 条件付き起動 | 曜日・時間による条件分岐 | 💙 低 |
| 48 | データ | クラウド同期 | 設定を複数デバイス間で共有 | 💙 低 |
| 49 | レジストリ | バージョン管理 | Node 18/20など複数バージョン管理 | 💙 低 |
| 50 | レジストリ | 依存関係表示 | ツール間の依存を可視化 | 💙 低 |
| 51 | レジストリ | ヘルスチェック | ツールが正しく動作するか確認 | 💙 低 |
| 52 | UI | ダッシュボード | 使用統計や分析情報 | 💙 低 |
| 53 | UI | テーマ切り替え | ダーク/ライトモード | 💙 低 |

**Phase 3のゴール**: パワーユーザー向け機能、エコシステム構築

---

## 非機能要件

### 🔴 最重要 (Phase 1で必須)

| No | 項目 | 要件 | 理由・背景 | 目標値 |
|----|------|------|-----------|--------|
| 1 | **起動速度** | AgiRity自体の起動が高速 | 「3秒で仕事開始」がコンセプト。AgiRity自体が遅かったら本末転倒 | 起動1秒以内 |
| 2 | **実行速度** | ワークスペース実行が即座に開始 | クリックしてからアプリ起動開始まで体感的に即座 | レスポンス0.1秒以内 |
| 3 | **信頼性** | 設定が消えない | ローカルファイルが破損しない、バックアップ機能 | データロス0% |
| 4 | **安定性** | クラッシュしない | OS起動時に動くツール = クラッシュしたら致命的 | クラッシュ率 < 0.1% |
| 5 | **互換性** | 一般的なアプリに対応 | VS Code, Chrome, Slack等のメジャーアプリで確実に動く | 主要20アプリ対応 |
| 6 | **セキュリティ** | 機密情報の保護 | 環境変数にAPIキー等が含まれる可能性 | 平文保存禁止 |

### 🟡 重要 (Phase 1-2で考慮)

| No | 項目 | 要件 | 理由・背景 | 目標値 |
|----|------|------|-----------|--------|
| 7 | **リソース効率** | メモリ使用量が少ない | 常駐アプリなのでメモリを食うと嫌われる | < 100MB (アイドル時) |
| 8 | **リソース効率** | CPU使用率が低い | バックグラウンドでCPUを使わない | < 1% (アイドル時) |
| 9 | **保守性** | ログが充実 | エラー発生時にデバッグできる | エラーログ完備 |
| 10 | **使いやすさ** | 直感的なUI | 初めてでも迷わない、ドキュメント不要 | タスク達成率 > 90% |
| 11 | **拡張性** | 新しいツール対応が容易 | コミュニティが独自ツールを追加できる | プラグイン機構 (Phase 2-3) |
| 12 | **移植性** | クロスプラットフォーム | macOS/Windows/Linuxで動く | 主要3OS対応 (Phase 2) |
| 13 | **後方互換性** | 設定ファイルの互換性維持 | バージョンアップで設定が壊れない | マイグレーション自動 |
| 14 | **エラーハンドリング** | 失敗しても続行 | 1つのアプリが起動失敗しても他は起動する | グレースフルな失敗 |

### 🟢 あると嬉しい (Phase 2-3)

| No | 項目 | 要件 | 理由・背景 | 目標値 |
|----|----------|------|-----------|--------|
| 15 | **国際化** | 多言語対応 | 英語圏ユーザーにもリーチ | 英語・日本語 |
| 16 | **アクセシビリティ** | キーボード操作 | マウスなしでも操作可能 | すべての機能 |
| 17 | **パフォーマンス監視** | 起動時間の計測 | どのアプリが遅いか分かる | 詳細ログ |
| 18 | **ドキュメント** | 充実したドキュメント | 開発者がコントリビュートしやすい | README, Wiki |
| 19 | **テスト容易性** | 自動テスト | CI/CDで品質を担保 | カバレッジ > 70% |
| 20 | **可観測性** | テレメトリ | 使用状況を把握 (opt-in) | 匿名統計 |

---

## デザイン仕様

### ブランディング

| 要素 | 仕様 |
|------|------|
| **ロゴ** | 8:55を指す時計 + 稲妻の針 |
| **Primary Color** | #4A90E2 (Blue) |
| **Accent Color** | #0066FF (Bright Blue), #FF6B35 (Orange) |
| **フォント (Display)** | Raleway (見出し) |
| **フォント (Body)** | Inter (本文) |
| **スペーシング** | 8pxベース |
| **Border Radius** | 8px (buttons), 16px (cards) |
| **Shadows** | 3段階 (sm, md, lg) |

### カラーパレット

#### Light Mode
```
Background:    #FFFFFF
Surface:       #F8F9FA
Border:        #E5E7EB
Text Primary:  #1F2937
Text Secondary:#6B7280
Primary:       #4A90E2
Primary Hover: #3B7DD6
Success:       #10B981
Error:         #EF4444
Warning:       #F59E0B
```

#### Dark Mode
```
Background:    #111827
Surface:       #1F2937
Border:        #374151
Text Primary:  #F9FAFB
Text Secondary:#9CA3AF
Primary:       #60A5FA
Primary Hover: #3B82F6
Success:       #34D399
Error:         #F87171
Warning:       #FBBF24
```

---

## 開発ロードマップ

| フェーズ | 期間目安 | ゴール | 主要機能数 |
|----------|----------|--------|-----------|
| **Phase 1** | 6-8週間 | MVP完成、実用レベル | 19機能 |
| **Phase 2** | 2-3ヶ月 | 実務で十分使える、共有可能 | 19機能 |
| **Phase 3** | 3-6ヶ月 | パワーユーザー向け、エコシステム | 17機能 |

### マイルストーン

| マイルストーン | バージョン | 期間 | ゴール |
|--------------|----------|------|--------|
| **Prototype** | v0.1.0 | Week 1-2 | 基本UIとデータ管理 |
| **MVP** | v0.2.0 | Week 3-4 | アプリ起動機能完成 |
| **Beta** | v0.5.0 | Week 5-6 | 自分で日常使用できる |
| **v1.0** | v1.0.0 | Week 7-8 | Phase 1完了、公開 |

---

## データ構造

### プロジェクト定義 (YAML)
```yaml
# ~/.agirity/workspaces.yaml
schemaVersion: 1
workspaces:
  - id: "uuid-1"
    name: "クライアントA開発"
    description: "フロントエンド開発環境"
    items:
      - type: "app"
        name: "Rancher Desktop"
        path: "/Applications/Rancher Desktop.app"
        waitTime: 30
        category: "development"
        
      - type: "app"
        name: "VS Code"
        path: "/Applications/Visual Studio Code.app"
        folder: "~/projects/client-a"
        dependsOn: "Rancher Desktop"
        category: "development"
        
      - type: "browser"
        name: "Reference Links"
        urls:
          - "https://github.com/client-a/frontend"
          - "https://dev.azure.com/client-a"
          - "http://localhost:3000"
        category: "reference"
    
    # 起動プリセット (オプション)
    presets:
      - name: "Full Development"
        description: "フルセットで開発開始"
        itemNames: ["Rancher Desktop", "VS Code", "Reference Links"]
      - name: "Code Only"
        description: "コーディングのみ"
        itemNames: ["VS Code"]
      - name: "Review Mode"
        description: "PRレビュー時"
        itemNames: ["Reference Links"]
    
    tags: ["frontend", "react", "client-work"]
    createdAt: "2025-01-01T00:00:00Z"
    updatedAt: "2025-01-15T00:00:00Z"
```

---

## 対応プラットフォーム

| OS | Phase 1 | Phase 2 | Phase 3 |
|----|---------|---------|---------|
| **macOS** | ✅ arm64 | ✅ x64も | - |
| **Windows** | - | ✅ | - |
| **Linux** | - | - | ✅ |

---

## 成功指標 (KPI)

### Phase 1 (MVP)

| 指標 | 目標 |
|------|------|
| 自分が毎日使う | ✅ |
| 起動時間短縮 | 3分 → 3秒 |
| バグレポート | < 5件 |
| クラッシュ | 0件 |

### Phase 2 (公開後)

| 指標 | 目標 |
|------|------|
| GitHub Stars | 100+ |
| ダウンロード数 | 500+ |
| アクティブユーザー | 50+ |
| Issue解決率 | > 80% |

---

## リスクと対策

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|---------|------|
| アプリ起動APIが不安定 | 高 | 中 | フォールバック、リトライ機構 |
| 設定ファイル破損 | 高 | 低 | 自動バックアップ、復旧機能 |
| OS依存の問題 | 中 | 高 | OS別の実装、テスト |
| メモリリーク | 中 | 中 | 定期的なプロファイリング |
| セキュリティホール | 高 | 低 | コードレビュー、監査 |

---

## 次のステップ

### 即座に実行

1. ✅ 要件定義完了 ← **完了**
2. ⏳ Figmaでデザイン作成
3. ⏳ プロジェクトセットアップ
4. ⏳ Figma Makeでコード生成
5. ⏳ 最初のテスト書く
6. ⏳ Claude Codeで実装開始

---

*このドキュメントはプロジェクトの進行に伴って更新されます。*
*最終更新: 2025-11-25*
